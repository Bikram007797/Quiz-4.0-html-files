<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Ultimate Quiz App - Gamified Learning Platform</title>
<style>
:root {
  --primary-color: #007bff;
  --primary-hover: #0069d9;
  --success-color: #28a745;
  --success-hover: #218838;
  --danger-color: #dc3545;
  --warning-color: #ffc107;
  --secondary-color: #6c757d;
  --bg-primary: #ffffff;
  --bg-secondary: #f8f9fa;
  --bg-tertiary: #e9ecef;
  --text-primary: #212529;
  --text-secondary: #6c757d;
  --border-color: #dee2e6;
  --shadow: 0 4px 6px rgba(0,0,0,0.1);
  --shadow-lg: 0 10px 30px rgba(0,0,0,0.15);
  --overlay: rgba(0,0,0,0.5);
  --nav-height: 80px;
  --gold: #ffd700;
  --silver: #c0c0c0;
  --bronze: #cd7f32;
}

[data-theme="dark"] {
  --primary-color: #4dabf7;
  --primary-hover: #339af0;
  --success-color: #51cf66;
  --success-hover: #40c057;
  --danger-color: #ff6b6b;
  --warning-color: #ffd43b;
  --secondary-color: #868e96;
  --bg-primary: #1a1a1a;
  --bg-secondary: #2d2d2d;
  --bg-tertiary: #404040;
  --text-primary: #f8f9fa;
  --text-secondary: #adb5bd;
  --border-color: #495057;
  --shadow: 0 4px 6px rgba(0,0,0,0.3);
  --shadow-lg: 0 10px 30px rgba(0,0,0,0.4);
  --overlay: rgba(0,0,0,0.7);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

html {
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  scroll-behavior: smooth;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: var(--bg-secondary);
  color: var(--text-primary);
  line-height: 1.6;
  transition: background 0.3s, color 0.3s;
  overflow-x: hidden;
  position: relative;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  min-height: 100vh;
}

/* ========== HEADER ========== */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: linear-gradient(135deg, var(--primary-color), var(--success-color));
  padding: 20px 30px;
  border-radius: 15px;
  margin-bottom: 20px;
  box-shadow: var(--shadow-lg);
  position: relative;
  overflow: hidden;
}

.header::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
  animation: headerPulse 8s ease-in-out infinite;
}

@keyframes headerPulse {
  0%, 100% { transform: translate(0, 0) scale(1); }
  50% { transform: translate(-10%, -10%) scale(1.1); }
}

.header-content {
  position: relative;
  z-index: 1;
}

.header h1 {
  font-size: 28px;
  color: white;
  font-weight: 700;
  user-select: none;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
  margin-bottom: 5px;
}

.header-subtitle {
  color: rgba(255,255,255,0.9);
  font-size: 14px;
  font-weight: 500;
}

.header-controls {
  display: flex;
  gap: 15px;
  align-items: center;
  position: relative;
  z-index: 1;
}

.theme-toggle, .fullscreen-btn, .stats-btn {
  background: rgba(255,255,255,0.2);
  backdrop-filter: blur(10px);
  border: 2px solid rgba(255,255,255,0.3);
  padding: 10px 15px;
  border-radius: 10px;
  cursor: pointer;
  font-size: 20px;
  transition: all 0.3s;
  min-width: 44px;
  min-height: 44px;
  color: white;
  user-select: none;
}

.theme-toggle:hover, .fullscreen-btn:hover, .stats-btn:hover {
  background: rgba(255,255,255,0.3);
  transform: scale(1.1);
}

.theme-toggle:active, .fullscreen-btn:active, .stats-btn:active {
  transform: scale(0.95);
}

/* ========== GAMIFICATION STATS BAR ========== */
.gamification-bar {
  background: var(--bg-primary);
  border-radius: 15px;
  padding: 20px;
  margin-bottom: 20px;
  box-shadow: var(--shadow);
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 15px;
}

.stat-item {
  text-align: center;
  padding: 15px;
  background: var(--bg-secondary);
  border-radius: 10px;
  border: 2px solid var(--border-color);
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
}

.stat-item:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
}

.stat-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s;
}

.stat-item:hover::before {
  left: 100%;
}

.stat-icon {
  font-size: 32px;
  margin-bottom: 10px;
  display: block;
}

.stat-value {
  font-size: 24px;
  font-weight: 700;
  color: var(--primary-color);
  display: block;
  margin-bottom: 5px;
}

.stat-label {
  font-size: 13px;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* ========== SUBJECTS GRID ========== */
.subjects-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.subject-card {
  background: var(--bg-primary);
  border-radius: 15px;
  padding: 25px;
  box-shadow: var(--shadow);
  cursor: pointer;
  transition: all 0.3s;
  border: 2px solid transparent;
  position: relative;
  overflow: hidden;
}

.subject-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 4px;
  background: linear-gradient(90deg, var(--primary-color), var(--success-color));
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.3s;
}

.subject-card:hover::before {
  transform: scaleX(1);
}

.subject-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
  border-color: var(--primary-color);
}

.subject-card:active {
  transform: translateY(-2px);
}

.subject-icon {
  font-size: 48px;
  margin-bottom: 15px;
  display: block;
  text-align: center;
}

.subject-name {
  font-size: 20px;
  font-weight: 600;
  margin-bottom: 10px;
  color: var(--text-primary);
  text-align: center;
}

.subject-progress {
  margin-top: 15px;
}

.progress-bar-container {
  background: var(--bg-tertiary);
  border-radius: 12px;
  overflow: hidden;
  height: 8px;
  margin-bottom: 8px;
}

.progress-bar {
  height: 100%;
  background: linear-gradient(90deg, var(--primary-color), var(--success-color));
  transition: width 0.4s ease;
  border-radius: 12px;
}

.progress-text {
  font-size: 12px;
  color: var(--text-secondary);
  text-align: center;
}

.chapter-count {
  background: var(--bg-secondary);
  color: var(--text-secondary);
  padding: 5px 12px;
  border-radius: 20px;
  font-size: 12px;
  display: inline-block;
  margin-top: 10px;
  font-weight: 600;
}

/* ========== CHAPTERS VIEW ========== */
.chapters-view {
  display: none;
}

.chapters-view.active {
  display: block;
}

.back-btn {
  background: var(--secondary-color);
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 10px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  margin-bottom: 20px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  transition: all 0.3s;
}

.back-btn:hover {
  background: #5a6268;
  transform: translateX(-5px);
}

.back-btn:active {
  transform: scale(0.95);
}

.chapters-header {
  background: var(--bg-primary);
  border-radius: 15px;
  padding: 25px;
  margin-bottom: 20px;
  box-shadow: var(--shadow);
  text-align: center;
}

.chapters-header h2 {
  font-size: 28px;
  color: var(--primary-color);
  margin-bottom: 10px;
}

.chapters-header p {
  color: var(--text-secondary);
  font-size: 15px;
}

.chapters-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 15px;
}

.chapter-card {
  background: var(--bg-primary);
  border-radius: 12px;
  padding: 20px;
  box-shadow: var(--shadow);
  cursor: pointer;
  transition: all 0.3s;
  border: 2px solid var(--border-color);
  position: relative;
  overflow: hidden;
  text-decoration: none;
  display: block;
}

.chapter-card::after {
  content: '‚Üí';
  position: absolute;
  right: 20px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 24px;
  color: var(--primary-color);
  opacity: 0;
  transition: all 0.3s;
}

.chapter-card:hover {
  transform: translateX(5px);
  border-color: var(--primary-color);
  box-shadow: var(--shadow-lg);
}

.chapter-card:hover::after {
  opacity: 1;
  right: 15px;
}

.chapter-number {
  font-size: 14px;
  color: var(--primary-color);
  font-weight: 600;
  margin-bottom: 8px;
  display: block;
}

.chapter-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 10px;
  line-height: 1.4;
}

.chapter-status {
  display: flex;
  gap: 10px;
  margin-top: 12px;
}

.status-badge {
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.status-badge.completed {
  background: rgba(40, 167, 69, 0.1);
  color: var(--success-color);
}

.status-badge.in-progress {
  background: rgba(255, 193, 7, 0.1);
  color: var(--warning-color);
}

.status-badge.not-started {
  background: rgba(108, 117, 125, 0.1);
  color: var(--secondary-color);
}

/* ========== ACHIEVEMENTS MODAL ========== */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--overlay);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  opacity: 0;
  transition: opacity 0.3s;
}

.modal-overlay.active {
  display: flex;
  opacity: 1;
}

.modal-content {
  background: var(--bg-primary);
  border-radius: 20px;
  padding: 30px;
  max-width: 600px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: var(--shadow-lg);
  transform: scale(0.8);
  transition: transform 0.3s;
}

.modal-overlay.active .modal-content {
  transform: scale(1);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.modal-header h2 {
  font-size: 24px;
  color: var(--primary-color);
}

.modal-close {
  background: transparent;
  border: none;
  font-size: 32px;
  color: var(--text-secondary);
  cursor: pointer;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  transition: all 0.3s;
}

.modal-close:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.achievements-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 15px;
  margin-top: 20px;
}

.achievement-item {
  text-align: center;
  padding: 15px;
  background: var(--bg-secondary);
  border-radius: 12px;
  border: 2px solid var(--border-color);
  transition: all 0.3s;
}

.achievement-item.unlocked {
  border-color: var(--gold);
  background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.05));
}

.achievement-item.locked {
  opacity: 0.5;
  filter: grayscale(1);
}

.achievement-icon {
  font-size: 48px;
  margin-bottom: 10px;
}

.achievement-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 5px;
}

.achievement-desc {
  font-size: 11px;
  color: var(--text-secondary);
}

/* ========== STREAK DISPLAY ========== */
.streak-display {
  background: linear-gradient(135deg, #ff6b6b, #ffd43b);
  color: white;
  padding: 15px 20px;
  border-radius: 12px;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  box-shadow: var(--shadow);
  font-weight: 600;
  margin-bottom: 20px;
}

.streak-icon {
  font-size: 24px;
  animation: flameFlicker 2s ease-in-out infinite;
}

@keyframes flameFlicker {
  0%, 100% { transform: scale(1) rotate(0deg); }
  25% { transform: scale(1.1) rotate(-5deg); }
  75% { transform: scale(1.1) rotate(5deg); }
}

.streak-text {
  font-size: 16px;
}

.streak-count {
  font-size: 20px;
  font-weight: 700;
}

/* ========== CONFETTI ANIMATION ========== */
.confetti {
  position: fixed;
  width: 10px;
  height: 10px;
  background: var(--primary-color);
  position: absolute;
  animation: confettiFall 3s linear forwards;
  pointer-events: none;
  z-index: 9999;
}

@keyframes confettiFall {
  to {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

/* ========== NOTIFICATION TOAST ========== */
.toast {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: var(--bg-primary);
  color: var(--text-primary);
  padding: 15px 20px;
  border-radius: 10px;
  box-shadow: var(--shadow-lg);
  display: flex;
  align-items: center;
  gap: 12px;
  transform: translateX(400px);
  transition: transform 0.3s;
  z-index: 1001;
  border-left: 4px solid var(--success-color);
  max-width: 350px;
}

.toast.show {
  transform: translateX(0);
}

.toast-icon {
  font-size: 24px;
}

.toast-message {
  flex: 1;
  font-size: 14px;
  font-weight: 500;
}

/* ========== SEARCH BAR ========== */
.search-container {
  margin-bottom: 20px;
}

.search-input {
  width: 100%;
  padding: 15px 20px;
  border: 2px solid var(--border-color);
  border-radius: 12px;
  background: var(--bg-primary);
  color: var(--text-primary);
  font-size: 16px;
  transition: all 0.3s;
}

.search-input:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
}

/* ========== LEADERBOARD ========== */
.leaderboard-section {
  background: var(--bg-primary);
  border-radius: 15px;
  padding: 25px;
  margin-bottom: 20px;
  box-shadow: var(--shadow);
}

.leaderboard-title {
  font-size: 22px;
  font-weight: 700;
  color: var(--primary-color);
  margin-bottom: 20px;
  text-align: center;
}

.leaderboard-item {
  display: flex;
  align-items: center;
  gap: 15px;
  padding: 15px;
  background: var(--bg-secondary);
  border-radius: 10px;
  margin-bottom: 10px;
  transition: all 0.3s;
}

.leaderboard-item:hover {
  transform: translateX(5px);
  box-shadow: var(--shadow);
}

.leaderboard-rank {
  font-size: 24px;
  font-weight: 700;
  width: 40px;
  text-align: center;
}

.leaderboard-rank.gold { color: var(--gold); }
.leaderboard-rank.silver { color: var(--silver); }
.leaderboard-rank.bronze { color: var(--bronze); }

.leaderboard-avatar {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary-color), var(--success-color));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  color: white;
}

.leaderboard-info {
  flex: 1;
}

.leaderboard-name {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 3px;
}

.leaderboard-score {
  font-size: 13px;
  color: var(--text-secondary);
}

.leaderboard-points {
  font-size: 20px;
  font-weight: 700;
  color: var(--primary-color);
}

/* ========== RESPONSIVE DESIGN ========== */
@media (max-width: 768px) {
  .header {
    flex-direction: column;
    gap: 15px;
    padding: 20px;
  }

  .header h1 {
    font-size: 22px;
  }

  .subjects-grid {
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  }

  .gamification-bar {
    grid-template-columns: repeat(2, 1fr);
  }

  .chapters-grid {
    grid-template-columns: 1fr;
  }

  .achievements-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .modal-content {
    width: 95%;
    padding: 20px;
  }
}

@media (max-width: 480px) {
  .subjects-grid {
    grid-template-columns: 1fr;
  }

  .stat-item {
    padding: 12px;
  }

  .stat-icon {
    font-size: 24px;
  }

  .stat-value {
    font-size: 20px;
  }

  .header h1 {
    font-size: 20px;
  }
}

/* ========== LOADING ANIMATION ========== */
.loading-spinner {
  display: inline-block;
  width: 40px;
  height: 40px;
  border: 4px solid var(--bg-tertiary);
  border-top-color: var(--primary-color);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.hidden {
  display: none !important;
}

/* ========== XP PROGRESS BAR ========== */
.xp-bar {
  background: var(--bg-primary);
  border-radius: 15px;
  padding: 20px;
  margin-bottom: 20px;
  box-shadow: var(--shadow);
}

.xp-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.xp-level {
  font-size: 24px;
  font-weight: 700;
  color: var(--primary-color);
}

.xp-points {
  font-size: 16px;
  color: var(--text-secondary);
}

.xp-progress-container {
  background: var(--bg-tertiary);
  border-radius: 12px;
  overflow: hidden;
  height: 12px;
  position: relative;
}

.xp-progress-bar {
  height: 100%;
  background: linear-gradient(90deg, #667eea, #764ba2);
  transition: width 0.6s ease;
  border-radius: 12px;
  position: relative;
  overflow: hidden;
}

.xp-progress-bar::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  animation: shimmer 2s infinite;
}

@keyframes shimmer {
  to { left: 100%; }
}

/* ========== DAILY CHALLENGE CARD ========== */
.daily-challenge {
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border-radius: 15px;
  padding: 25px;
  margin-bottom: 20px;
  box-shadow: var(--shadow-lg);
  position: relative;
  overflow: hidden;
}

.daily-challenge::before {
  content: '‚≠ê';
  position: absolute;
  top: -20px;
  right: -20px;
  font-size: 120px;
  opacity: 0.1;
}

.challenge-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.challenge-title {
  font-size: 20px;
  font-weight: 700;
}

.challenge-timer {
  background: rgba(255,255,255,0.2);
  padding: 5px 12px;
  border-radius: 20px;
  font-size: 13px;
  font-weight: 600;
}

.challenge-desc {
  font-size: 15px;
  margin-bottom: 15px;
  opacity: 0.9;
}

.challenge-reward {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: rgba(255,255,255,0.2);
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 600;
}

.challenge-btn {
  background: white;
  color: #667eea;
  border: none;
  padding: 12px 24px;
  border-radius: 10px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  margin-top: 15px;
  transition: all 0.3s;
}

.challenge-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

/* ========== SOUND TOGGLE ========== */
.sound-toggle {
  position: fixed;
  bottom: 20px;
  left: 20px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: var(--primary-color);
  color: white;
  border: none;
  cursor: pointer;
  font-size: 24px;
  box-shadow: 0 6px 20px rgba(0,123,255,0.4);
  transition: all 0.3s ease;
  z-index: 998;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sound-toggle:hover {
  transform: scale(1.1);
}

.sound-toggle:active {
  transform: scale(0.9);
}

.sound-toggle.muted {
  background: var(--secondary-color);
}

/* ========== ANIMATIONS ========== */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in {
  animation: fadeIn 0.5s ease-out;
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-50px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.slide-in-left {
  animation: slideInLeft 0.5s ease-out;
}

@keyframes bounceIn {
  0% {
    opacity: 0;
    transform: scale(0.3);
  }
  50% {
    opacity: 1;
    transform: scale(1.05);
  }
  70% {
    transform: scale(0.9);
  }
  100% {
    transform: scale(1);
  }
}

.bounce-in {
  animation: bounceIn 0.6s ease-out;
}

/* ========== PRINT STYLES ========== */
@media print {
  .header-controls,
  .back-btn,
  .gamification-bar,
  .daily-challenge,
  .sound-toggle,
  .stats-btn,
  .toast {
    display: none !important;
  }

  body {
    background: white;
  }

  .container {
    padding: 20px;
  }
}
/* ========== LOGIN PAGE STYLES ========== */
.login-page {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  background: linear-gradient(135deg, var(--primary-color), var(--success-color));
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  transition: opacity 0.3s;
}

.login-page.hidden {
  display: none;
}

.login-container {
  background: var(--bg-primary);
  border-radius: 20px;
  padding: 40px;
  max-width: 450px;
  width: 90%;
  box-shadow: var(--shadow-lg);
}

.login-header {
  text-align: center;
  margin-bottom: 30px;
}

.login-header h1 {
  font-size: 32px;
  color: var(--primary-color);
  margin-bottom: 10px;
}

.login-header p {
  color: var(--text-secondary);
  font-size: 15px;
}

.login-tabs {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-bottom: 25px;
}

.tab-btn {
  padding: 12px;
  border: 2px solid var(--border-color);
  background: transparent;
  border-radius: 10px;
  cursor: pointer;
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
  transition: all 0.3s;
}

.tab-btn.active {
  background: var(--primary-color);
  color: white;
  border-color: var(--primary-color);
}

.auth-form {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.auth-form input {
  padding: 15px;
  border: 2px solid var(--border-color);
  border-radius: 10px;
  font-size: 16px;
  background: var(--bg-secondary);
  color: var(--text-primary);
  transition: all 0.3s;
}

.auth-form input:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
}

.auth-btn {
  padding: 15px;
  background: var(--primary-color);
  color: white;
  border: none;
  border-radius: 10px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
}

.auth-btn:hover {
  background: var(--primary-hover);
  transform: translateY(-2px);
  box-shadow: var(--shadow);
}

.auth-btn:active {
  transform: translateY(0);
}

.auth-error {
  color: var(--danger-color);
  font-size: 14px;
  text-align: center;
  min-height: 20px;
}

.auth-divider {
  text-align: center;
  margin: 20px 0;
  color: var(--text-secondary);
  font-size: 14px;
  position: relative;
}

.auth-divider::before,
.auth-divider::after {
  content: '';
  position: absolute;
  top: 50%;
  width: 40%;
  height: 1px;
  background: var(--border-color);
}

.auth-divider::before {
  left: 0;
}

.auth-divider::after {
  right: 0;
}

.google-btn {
  width: 100%;
  padding: 15px;
  background: white;
  color: #333;
  border: 2px solid var(--border-color);
  border-radius: 10px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  transition: all 0.3s;
}

.google-btn:hover {
  background: var(--bg-secondary);
  transform: translateY(-2px);
  box-shadow: var(--shadow);
}

.google-btn span {
  font-size: 24px;
}

/* User Profile Button */
.user-profile {
  display: flex;
  align-items: center;
  gap: 10px;
  background: rgba(255,255,255,0.2);
  backdrop-filter: blur(10px);
  border: 2px solid rgba(255,255,255,0.3);
  padding: 8px 15px;
  border-radius: 25px;
  cursor: pointer;
  transition: all 0.3s;
}

.user-profile:hover {
  background: rgba(255,255,255,0.3);
}

.user-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
}

.user-name {
  color: white;
  font-weight: 600;
  font-size: 14px;
}

.logout-btn {
  background: rgba(220, 53, 69, 0.8);
  color: white;
  border: none;
  padding: 8px 15px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  transition: all 0.3s;
}

.logout-btn:hover {
  background: var(--danger-color);
}

</style>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>
<!-- LOGIN PAGE -->
<div id="loginPage" class="login-page">
  <div class="login-container">
    <div class="login-header">
      <h1>üéì Ultimate Quiz App</h1>
      <p>Login to track your progress</p>
    </div>
    
    <div class="login-tabs">
      <button class="tab-btn active" id="loginTab">Login</button>
      <button class="tab-btn" id="signupTab">Sign Up</button>
    </div>
    
    <!-- Login Form -->
    <div id="loginForm" class="auth-form">
      <input type="email" id="loginEmail" placeholder="Email" required>
      <input type="password" id="loginPassword" placeholder="Password" required>
      <button class="auth-btn" id="loginBtn">Login</button>
      <div class="auth-error" id="loginError"></div>
    </div>
    
    <!-- Signup Form -->
    <div id="signupForm" class="auth-form hidden">
      <input type="text" id="signupName" placeholder="Full Name" required>
      <input type="email" id="signupEmail" placeholder="Email" required>
      <input type="password" id="signupPassword" placeholder="Password (min 6 characters)" required>
      <button class="auth-btn" id="signupBtn">Create Account</button>
      <div class="auth-error" id="signupError"></div>
    </div>
    
    <div class="auth-divider">OR</div>
    
    <button class="google-btn" id="googleLoginBtn">
      <span>üîê</span> Continue with Google
    </button>
  </div>
</div>
<div class="container">
  <!-- HEADER -->
  <div class="header fade-in">
    <div class="header-content">
      <h1>üéì Ultimate Quiz App</h1>
      <div class="header-subtitle">Gamified Learning Platform</div>
    </div>
    <div class="header-controls">
      <button class="stats-btn" id="statsBtn" title="View Stats & Achievements">üèÜ</button>
      <button class="theme-toggle" id="themeToggle" title="Toggle Theme">üåô</button>
      <button class="fullscreen-btn" id="fullscreenBtn" title="Fullscreen">‚õ∂</button>
</div>
  </div>
  <!-- MAIN VIEW (SUBJECTS) -->
  <div id="mainView">
    <!-- GAMIFICATION STATS -->
    <div class="gamification-bar slide-in-left">
      <div class="stat-item">
        <span class="stat-icon">‚ö°</span>
        <span class="stat-value" id="totalXP">0</span>
        <span class="stat-label">Total XP</span>
      </div>
      <div class="stat-item">
        <span class="stat-icon">üèÖ</span>
        <span class="stat-value" id="levelValue">1</span>
        <span class="stat-label">Level</span>
      </div>
      <div class="stat-item">
        <span class="stat-icon">üî•</span>
        <span class="stat-value" id="streakValue">0</span>
        <span class="stat-label">Day Streak</span>
      </div>
      <div class="stat-item">
        <span class="stat-icon">‚úÖ</span>
        <span class="stat-value" id="completedQuizzes">0</span>
        <span class="stat-label">Completed</span>
      </div>
    </div>
    <!-- XP PROGRESS BAR -->
<div class="xp-bar fade-in">
  <div class="xp-header">
    <div class="xp-level">Level <span id="currentLevel">1</span></div>
    <div class="xp-points"><span id="currentXP">0</span> / <span id="nextLevelXP">100</span> XP</div>
  </div>
  <div class="xp-progress-container">
    <div class="xp-progress-bar" id="xpProgressBar" style="width: 0%"></div>
  </div>
</div>

<!-- DAILY CHALLENGE -->
<div class="daily-challenge bounce-in">
  <div class="challenge-header">
    <div class="challenge-title">‚≠ê Daily Challenge</div>
    <div class="challenge-timer" id="challengeTimer">23:45:12</div>
  </div>
  <div class="challenge-desc" id="challengeDesc">Complete 5 quizzes today and earn bonus XP!</div>
  <div class="challenge-reward">
    <span>üéÅ</span>
    <span id="challengeReward">+50 XP</span>
  </div>
  <button class="challenge-btn" onclick="startDailyChallenge()">Start Challenge</button>
</div>

<!-- SEARCH BAR -->
<div class="search-container">
  <input type="text" class="search-input" id="searchInput" placeholder="üîç Search subjects or chapters...">
</div>

<!-- SUBJECTS GRID -->
<div class="subjects-grid" id="subjectsGrid"></div>
  </div>
  <!-- CHAPTERS VIEW -->
  <div class="chapters-view" id="chaptersView">
    <button class="back-btn" id="backBtn">‚Üê Back to Subjects</button>
    <div class="chapters-header">
      <h2 id="subjectTitle"></h2>
      <p id="subjectDescription"></p>
    </div>
    <div class="chapters-grid" id="chaptersGrid"></div>
  </div>
</div>
<!-- ACHIEVEMENTS MODAL -->
<div class="modal-overlay" id="achievementsModal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>üèÜ Achievements & Stats</h2>
      <button class="modal-close" id="modalClose">√ó</button>
    </div>
<div class="leaderboard-section">
  <div class="leaderboard-title">üìä Your Statistics</div>
  <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 15px;">
    <div class="stat-item">
      <span class="stat-icon">üìö</span>
      <span class="stat-value" id="modalTotalQuizzes">0</span>
      <span class="stat-label">Total Quizzes</span>
    </div>
    <div class="stat-item">
      <span class="stat-icon">üéØ</span>
      <span class="stat-value" id="modalAccuracy">0%</span>
      <span class="stat-label">Accuracy</span>
    </div>
    <div class="stat-item">
      <span class="stat-icon">‚è±Ô∏è</span>
      <span class="stat-value" id="modalTotalTime">0h</span>
      <span class="stat-label">Study Time</span>
    </div>
    <div class="stat-item">
      <span class="stat-icon">üåü</span>
      <span class="stat-value" id="modalBestStreak">0</span>
      <span class="stat-label">Best Streak</span>
    </div>
  </div>
</div>

<div style="margin-top: 30px;">
  <h3 style="font-size: 18px; margin-bottom: 15px; color: var(--primary-color);">üèÖ Achievements</h3>
  <div class="achievements-grid" id="achievementsGrid"></div>
</div>
  </div>
</div>
<!-- TOAST NOTIFICATION -->
<div class="toast" id="toast">
  <span class="toast-icon">‚ú®</span>
  <div class="toast-message" id="toastMessage"></div>
</div>
<!-- SOUND TOGGLE -->
<button class="sound-toggle" id="soundToggle" title="Toggle Sound">üîä</button>
<script>
    // ========== FIREBASE INITIALIZATION ==========
const firebaseConfig = {
  apiKey: "AIzaSyDdzftqxfVOKJ4NqWo_G28h1FX5FELpVU4",
  authDomain: "my-quizu-007.firebaseapp.com",
  projectId: "my-quizu-007",
  storageBucket: "my-quizu-007.firebasestorage.app",
  messagingSenderId: "2753382982",
  appId: "1:2753382982:web:7a7429562c63721355d847"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

let currentUser = null;
// ========== AUTHENTICATION FUNCTIONS ==========
function initAuth() {
  auth.onAuthStateChanged((user) => {
    if (user) {
      currentUser = user;
      document.getElementById('loginPage').classList.add('hidden');
      loadUserDataFromFirebase(user.uid);
      showUserProfile(user);
    } else {
      document.getElementById('loginPage').classList.remove('hidden');
      currentUser = null;
    }
  });
}

function showUserProfile(user) {
  const controls = document.querySelector('.header-controls');
  
  // Remove existing profile if any
  const existingProfile = document.getElementById('userProfile');
  if (existingProfile) existingProfile.remove();
  
  // Create profile element
  const profile = document.createElement('div');
  profile.id = 'userProfile';
  profile.className = 'user-profile';
  profile.innerHTML = `
    <div class="user-avatar">${user.displayName ? user.displayName[0].toUpperCase() : user.email[0].toUpperCase()}</div>
    <div class="user-name">${user.displayName || user.email.split('@')[0]}</div>
    <button class="logout-btn" onclick="handleLogout()">Logout</button>
  `;
  
  // Insert before theme toggle
  controls.insertBefore(profile, controls.firstChild);
}

// Login with Email
function handleLogin() {
  const email = document.getElementById('loginEmail').value;
  const password = document.getElementById('loginPassword').value;
  const errorDiv = document.getElementById('loginError');
  
  if (!email || !password) {
    errorDiv.textContent = 'Please fill all fields';
    return;
  }
  
  auth.signInWithEmailAndPassword(email, password)
    .then(() => {
      errorDiv.textContent = '';
      showToast('‚úÖ Logged in successfully!');
    })
    .catch((error) => {
      errorDiv.textContent = error.message;
    });
}

// Signup with Email
function handleSignup() {
  const name = document.getElementById('signupName').value;
  const email = document.getElementById('signupEmail').value;
  const password = document.getElementById('signupPassword').value;
  const errorDiv = document.getElementById('signupError');
  
  if (!name || !email || !password) {
    errorDiv.textContent = 'Please fill all fields';
    return;
  }
  
  if (password.length < 6) {
    errorDiv.textContent = 'Password must be at least 6 characters';
    return;
  }
  
  auth.createUserWithEmailAndPassword(email, password)
    .then((userCredential) => {
      return userCredential.user.updateProfile({
        displayName: name
      });
    })
    .then(() => {
      errorDiv.textContent = '';
      showToast('‚úÖ Account created successfully!');
    })
    .catch((error) => {
      errorDiv.textContent = error.message;
    });
}

// Login with Google
function handleGoogleLogin() {
  const provider = new firebase.auth.GoogleAuthProvider();
  auth.signInWithPopup(provider)
    .then(() => {
      showToast('‚úÖ Logged in with Google!');
    })
    .catch((error) => {
      console.error('Google login error:', error);
      showToast('‚ùå Google login failed. Please try again.');
    });
}

// Logout
function handleLogout() {
  if (confirm('Are you sure you want to logout?')) {
    auth.signOut()
      .then(() => {
        showToast('üëã Logged out successfully!');
        location.reload();
      })
      .catch((error) => {
        console.error('Logout error:', error);
      });
  }
}

// Tab Switching
function switchTab(tab) {
  const loginTab = document.getElementById('loginTab');
  const signupTab = document.getElementById('signupTab');
  const loginForm = document.getElementById('loginForm');
  const signupForm = document.getElementById('signupForm');
  
  if (tab === 'login') {
    loginTab.classList.add('active');
    signupTab.classList.remove('active');
    loginForm.classList.remove('hidden');
    signupForm.classList.add('hidden');
  } else {
    signupTab.classList.add('active');
    loginTab.classList.remove('active');
    signupForm.classList.remove('hidden');
    loginForm.classList.add('hidden');
  }
}
// ========== DATA STRUCTURE ==========
const subjects = [
  {
    id: 'geography',
    name: 'Geography',
    icon: 'üåç',
    description: 'Explore Earth\'s physical features and processes',
    chapters: [
      { id: 1, name: 'SOLAR SYSTEM', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 1 - SOLAR SYSTEM.html' },
      { id: 2, name: 'LATITUDE AND LONGITUDE', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 2 - LATITUDE AND LONGITUDE.html' },
      { id: 3, name: 'EARTH\'S INTERIOR AND PLATE TECHTONICS', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 3 - EARTH\'S INTERIOR AND PLATE TECHTONICS.html' },
      { id: 4, name: 'OCEAN AND CONTINENTS', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 4 - OCEAN AND CONTINENTS.html' },
      { id: 5, name: 'ROCKS AND VOLCANO', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 5 - ROCKS AND VOLCANO.html' },
      { id: 6, name: 'GEOMORPHIC PROCESSES', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 6 - GEOMORPHIC PROCESSES.html' },
      { id: 7, name: 'LANDFORMS', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 7 - LANDFORMS.html' },
      { id: 8, name: 'ATMOSPHERE', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 8 - ATMOSPHERE.html' },
      { id: 9, name: 'CONDENSATION AND PRECIPITATION', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 9 - CONDENSATION AND PRECIPITATION.html' },
      { id: 10, name: 'WIND', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 10 - WIND.html' },
      { id: 11, name: 'CYCLONE AND OCEAN CURRENTS', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 11 - CYCLONE AND OCEAN CURRENTS.html' },
      { id: 12, name: 'INDIA AND IT\'S LOCATION', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 12 - INDIA AND IT\'S LOCATION.html' },
      { id: 13, name: 'HIMALAYAS', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 13 - HIMALAYAS.html' },
      { id: 14, name: 'PENINSULAR PLATEAU', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 14 - PENINSULAR PLATEAU.html' },
      { id: 15, name: 'PLAINS AND ISLANDS', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 15 - PLAINS AND ISLANDS.html' },
      { id: 16, name: 'HIMALAYAN RIVER SYSTEM', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 16 - HIMALAYAN RIVER SYSTEM.html' },
      { id: 17, name: 'PENINSULAR RIVERS', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 17 - PENINSULAR RIVERS.html' },
      { id: 18, name: 'DAMS LAKES AND WATERFALLS', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 18 - DAMS LAKES AND WATERFALLS.html' },
      { id: 19, name: 'MONSOON', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 19 - MONSOON.html' },
      { id: 20, name: 'FORESTS AND GRASSLANDS', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 20 - FORESTS AND GRASSLANDS.html' },
      { id: 21, name: 'SOIL', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 21 - SOIL.html' },
      { id: 22, name: 'AGRICULTURE', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 22 - AGRICULTURE.html' },
      { id: 23, name: 'MINERALS', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 23 - MINERALS.html' },
      { id: 24, name: 'TRANSPORT', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 24 - TRANSPORT.html' },
      { id: 25, name: 'WORLD MAP', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 25 - WORLD MAP.html' },
      { id: 26, name: 'HUMAN GEOGRAPHY', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 26 - HUMAN GEOGRAPHY.html' }
    ]
  },
  {
    id: 'polity',
    name: 'Polity',
    icon: '‚öñÔ∏è',
    description: 'Study political systems and governance',
    chapters: [
      { id: 1, name: 'Polity 1', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 1 - SOLAR SYSTEM.html' },
      { id: 2, name: 'Polity 2', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 2 - LATITUDE AND LONGITUDE.html' }
    ]
  },
  {
    id: 'ancient-history',
    name: 'Ancient History',
    icon: 'üèõÔ∏è',
    description: 'Discover ancient civilizations',
    chapters: [
      { id: 1, name: 'An. History 1', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 1 - SOLAR SYSTEM.html' }
    ]
  },
  {
    id: 'medieval-history',
    name: 'Medieval History',
    icon: 'üè∞',
    description: 'Explore the medieval period',
    chapters: [
      { id: 1, name: 'Med. History 1', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 7 - LANDFORMS.html' },
      { id: 2, name: 'Med. History 2', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 8 - ATMOSPHERE.html' }
    ]
  },
  {
    id: 'modern-history',
    name: 'Modern History',
    icon: 'üìú',
    description: 'Learn about modern world events',
    chapters: [
      { id: 1, name: 'Mod. His. 1', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 11 - CYCLONE AND OCEAN CURRENTS.html' },
      { id: 2, name: 'Mod. His. 2', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 12 - INDIA AND IT\'S LOCATION.html' }
    ]
  },
  {
    id: 'economics',
    name: 'Economics',
    icon: 'üí∞',
    description: 'Understand economic principles',
    chapters: [
      { id: 1, name: 'Eco 1', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 18 - DAMS LAKES AND WATERFALLS.html' },
      { id: 2, name: 'Eco 2', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 19 - MONSOON.html' }
    ]
  },
  {
    id: 'biology',
    name: 'Biology',
    icon: 'üß¨',
    description: 'Study life and living organisms',
    chapters: [
      { id: 1, name: 'Biology 1', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 1 - SOLAR SYSTEM.html' },
      { id: 2, name: 'Biology 2', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 2 - LATITUDE AND LONGITUDE.html' }
    ]
  },
  {
    id: 'chemistry',
    name: 'Chemistry',
    icon: '‚öóÔ∏è',
    description: 'Explore matter and its properties',
    chapters: [
      { id: 1, name: 'Chemistry 1', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 1 - SOLAR SYSTEM.html' },
      { id: 2, name: 'Chemistry 2', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 2 - LATITUDE AND LONGITUDE.html' }
    ]
  },
  {
    id: 'physics',
    name: 'Physics',
    icon: '‚öõÔ∏è',
    description: 'Understand natural phenomena',
    chapters: [
      { id: 1, name: 'Physics 1', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 1 - SOLAR SYSTEM.html' },
      { id: 2, name: 'Physics 2', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 2 - LATITUDE AND LONGITUDE.html' }
    ]
  },
  {
    id: 'environment',
    name: 'Environment',
    icon: 'üå±',
    description: 'Learn about environmental science',
    chapters: [
      { id: 1, name: 'Env 1', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 1 - SOLAR SYSTEM.html' },
      { id: 2, name: 'Env 2', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 2 - LATITUDE AND LONGITUDE.html' }
    ]
  },
  {
    id: 'static-gk',
    name: 'Static GK',
    icon: 'üìñ',
    description: 'General knowledge and facts',
    chapters: [
      { id: 1, name: 'GK 1', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 1 - SOLAR SYSTEM.html' },
      { id: 2, name: 'GK 2', url: 'https://bikram007797.github.io/Quiz-4.0-html-files/geo Html/Chapter 2 - LATITUDE AND LONGITUDE.html' }
    ]
  }
];

// ========== ACHIEVEMENTS DATA ==========
const achievements = [
  { id: 'first_quiz', name: 'First Steps', desc: 'Complete your first quiz', icon: 'üéØ', unlocked: false },
  { id: 'perfect_score', name: 'Perfectionist', desc: 'Score 100% on any quiz', icon: 'üíØ', unlocked: false },
  { id: 'streak_7', name: 'Week Warrior', desc: '7 day streak', icon: 'üî•', unlocked: false },
  { id: 'streak_30', name: 'Monthly Master', desc: '30 day streak', icon: 'üèÜ', unlocked: false },
  { id: 'complete_subject', name: 'Subject Master', desc: 'Complete all chapters in a subject', icon: 'üìö', unlocked: false },
  { id: 'level_10', name: 'Rising Star', desc: 'Reach Level 10', icon: '‚≠ê', unlocked: false },
  { id: 'level_25', name: 'Quiz Legend', desc: 'Reach Level 25', icon: 'üëë', unlocked: false },
  { id: 'speed_demon', name: 'Speed Demon', desc: 'Complete quiz in under 5 minutes', icon: '‚ö°', unlocked: false },
  { id: 'night_owl', name: 'Night Owl', desc: 'Complete quiz after midnight', icon: 'ü¶â', unlocked: false },
  { id: 'early_bird', name: 'Early Bird', desc: 'Complete quiz before 6 AM', icon: 'üê¶', unlocked: false },
  { id: 'quiz_marathon', name: 'Marathon Runner', desc: 'Complete 10 quizzes in one day', icon: 'üèÉ', unlocked: false },
  { id: 'all_subjects', name: 'Knowledge King', desc: 'Complete at least one quiz from each subject', icon: 'üë®‚Äçüéì', unlocked: false }
];

// ========== GLOBAL STATE ==========
let userStats = {
  totalXP: 0,
  level: 1,
  streak: 0,
  completedQuizzes: 0,
  lastQuizDate: null,
  bestStreak: 0,
  totalTime: 0,
  accuracy: 0,
  subjectsProgress: {},
  achievements: [...achievements],
  soundEnabled: true,
  dailyChallengeCompleted: false,
  quizzesToday: 0
};

let currentSubject = null;

// ========== INITIALIZATION ==========
// ========== INITIALIZATION ==========
document.addEventListener('DOMContentLoaded', () => {
  initTheme();
  initAuth();
  initEventListeners();
  updateDailyChallenge();
  preventDoubleTapZoom();
});

function preventDoubleTapZoom() {
  let lastTouchEnd = 0;
  document.addEventListener('touchend', (event) => {
    const now = Date.now();
    if (now - lastTouchEnd <= 300) {
      event.preventDefault();
    }
    lastTouchEnd = now;
  }, { passive: false });
}

// ========== THEME ==========
function initTheme() {
  const savedTheme = localStorage.getItem('quizTheme') || 'light';
  document.documentElement.setAttribute('data-theme', savedTheme);
  updateThemeIcon();
}

function updateThemeIcon() {
  const theme = document.documentElement.getAttribute('data-theme');
  const btn = document.getElementById('themeToggle');
  if (btn) btn.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
}

function toggleTheme() {
  const current = document.documentElement.getAttribute('data-theme');
  const newTheme = current === 'dark' ? 'light' : 'dark';
  document.documentElement.setAttribute('data-theme', newTheme);
  localStorage.setItem('quizTheme', newTheme);
  updateThemeIcon();
  playSound('click');
}

// ========== QUIZ COMPLETION LISTENER ==========
function initQuizCompletionListener() {
  // Listen for postMessage from quiz pages
  window.addEventListener('message', function(event) {
    if (event.data && event.data.forApp === 'quiz-app' && event.data.completed === true) {
      const { subjectId, chapterId, score } = event.data;
      if (subjectId && chapterId && currentUser) {
        completeChapter(subjectId, chapterId, score);
        showToast(`üéâ Quiz completed! Score: ${score}%`);
      }
    }
  }, false);

  // Also check sessionStorage periodically
  setInterval(() => {
    try {
      const lastQuiz = sessionStorage.getItem('lastQuizResult');
      if (lastQuiz) {
        const data = JSON.parse(lastQuiz);
        if (data && data.score && data.subjectId && data.chapterId) {
          completeChapter(data.subjectId, data.chapterId, data.score);
          sessionStorage.removeItem('lastQuizResult');
        }
      }
    } catch (e) {
      console.error('Error reading sessionStorage:', e);
    }
  }, 1000);
}
// ========== EVENT LISTENERS ==========
function initEventListeners() {
  document.getElementById('themeToggle')?.addEventListener('click', toggleTheme);
  document.getElementById('fullscreenBtn')?.addEventListener('click', toggleFullscreen);
  document.getElementById('statsBtn')?.addEventListener('click', openAchievementsModal);
  document.getElementById('modalClose')?.addEventListener('click', closeAchievementsModal);
  document.getElementById('backBtn')?.addEventListener('click', backToSubjects);
  document.getElementById('searchInput')?.addEventListener('input', handleSearch);
  document.getElementById('soundToggle')?.addEventListener('click', toggleSound);
  
  const modal = document.getElementById('achievementsModal');
  modal?.addEventListener('click', (e) => {
    if (e.target === modal) closeAchievementsModal();
  });
  
  // Login/Signup event listeners
  document.getElementById('loginBtn')?.addEventListener('click', handleLogin);
  document.getElementById('signupBtn')?.addEventListener('click', handleSignup);
  document.getElementById('googleLoginBtn')?.addEventListener('click', handleGoogleLogin);
  document.getElementById('loginTab')?.addEventListener('click', () => switchTab('login'));
  document.getElementById('signupTab')?.addEventListener('click', () => switchTab('signup'));
  
  // Allow Enter key to submit
  document.getElementById('loginPassword')?.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') handleLogin();
  });
  document.getElementById('signupPassword')?.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') handleSignup();
  });
  
  initQuizCompletionListener();
}

// ========== RENDERING ==========
function renderSubjects(filter = '') {
  const grid = document.getElementById('subjectsGrid');
  if (!grid) return;
  
  grid.innerHTML = '';
  
  const filtered = subjects.filter(subject => 
    subject.name.toLowerCase().includes(filter.toLowerCase()) ||
    subject.chapters.some(ch => ch.name.toLowerCase().includes(filter.toLowerCase()))
  );
  
  filtered.forEach((subject, index) => {
    const progress = calculateSubjectProgress(subject.id);
    const card = document.createElement('div');
    card.className = 'subject-card fade-in';
    card.style.animationDelay = `${index * 0.1}s`;
    
    card.innerHTML = `
      <span class="subject-icon">${subject.icon}</span>
      <div class="subject-name">${subject.name}</div>
      <div class="chapter-count">${subject.chapters.length} Chapter${subject.chapters.length > 1 ? 's' : ''}</div>
      <div class="subject-progress">
        <div class="progress-bar-container">
          <div class="progress-bar" style="width: ${progress}%"></div>
        </div>
        <div class="progress-text">${progress}% Complete</div>
      </div>
    `;
    
    card.addEventListener('click', () => {
      openSubject(subject);
      playSound('click');
    });
    
    grid.appendChild(card);
  });
}

function renderChapters(subject) {
  const grid = document.getElementById('chaptersGrid');
  if (!grid) return;
  
  grid.innerHTML = '';
  
  subject.chapters.forEach((chapter, index) => {
    const status = getChapterStatus(subject.id, chapter.id);
    const card = document.createElement('a');
    card.className = 'chapter-card slide-in-left';
    card.style.animationDelay = `${index * 0.05}s`;
   card.href = `${chapter.url}?subjectId=${subject.id}&chapterId=${chapter.id}&userId=${currentUser?.uid || 'guest'}`;
    card.target = '_blank';
    
    card.innerHTML = `
      <span class="chapter-number">Chapter ${chapter.id}</span>
      <div class="chapter-title">${chapter.name}</div>
      <div class="chapter-status">
        <span class="status-badge ${status}">${status.replace('-', ' ')}</span>
      </div>
    `;
    
    card.addEventListener('click', (e) => {
      handleChapterClick(subject.id, chapter.id);
      playSound('success');
    });
    
    grid.appendChild(card);
  });
}

// ========== NAVIGATION ==========
function openSubject(subject) {
  currentSubject = subject;
  document.getElementById('mainView').style.display = 'none';
  document.getElementById('chaptersView').classList.add('active');
  document.getElementById('subjectTitle').textContent = `${subject.icon} ${subject.name}`;
  document.getElementById('subjectDescription').textContent = subject.description;
  renderChapters(subject);
}

function backToSubjects() {
  currentSubject = null;
  document.getElementById('mainView').style.display = 'block';
  document.getElementById('chaptersView').classList.remove('active');
  playSound('click');
}

function handleSearch(e) {
  const filter = e.target.value;
  renderSubjects(filter);
}

// ========== PROGRESS TRACKING ==========
function calculateSubjectProgress(subjectId) {
  const subject = subjects.find(s => s.id === subjectId);
  if (!subject) return 0;
  
  const progress = userStats.subjectsProgress[subjectId] || {};
  const completed = Object.values(progress).filter(v => v === 'completed').length;
  return Math.round((completed / subject.chapters.length) * 100);
}

function getChapterStatus(subjectId, chapterId) {
  const progress = userStats.subjectsProgress[subjectId] || {};
  return progress[chapterId] || 'not-started';
}

function handleChapterClick(subjectId, chapterId) {
  if (!userStats.subjectsProgress[subjectId]) {
    userStats.subjectsProgress[subjectId] = {};
  }
  
  // Only mark as "in-progress" when clicked
  if (!userStats.subjectsProgress[subjectId][chapterId]) {
    userStats.subjectsProgress[subjectId][chapterId] = 'in-progress';
    saveUserStats();
  }
  
  // Store which chapter user is attempting (for completion tracking)
  localStorage.setItem('currentQuizSubject', subjectId);
  localStorage.setItem('currentQuizChapter', chapterId);
}
// Add this function if not exists, or replace the existing one
function checkQuizCompletion() {
  const urlParams = new URLSearchParams(window.location.search);
  const completed = urlParams.get('completed');
  const score = parseInt(urlParams.get('score')) || 0;
  const chapterId = urlParams.get('chapterId');
  const subjectId = urlParams.get('subjectId');
  
  if (completed === 'true' && subjectId && chapterId && score > 0) {
    // Mark as completed in Firebase
    completeChapter(subjectId, chapterId, score);
    
    // Update XP based on score
    let xpGained = calculateXPFromScore(score);
    addXP(xpGained);
    
    // Show success message
    showToast(`‚úÖ Quiz completed! +${xpGained} XP earned!`);
    
    // Clean up URL parameters
    const newUrl = window.location.pathname;
    window.history.replaceState({}, document.title, newUrl);
  }
}

// Add this helper function
function calculateXPFromScore(score) {
  if (score >= 90) return 50;
  if (score >= 80) return 40;
  if (score >= 70) return 30;
  if (score >= 60) return 20;
  return 10;
}

// Call this in DOMContentLoaded


// ========== FIX THE completeChapter FUNCTION ==========
function completeChapter(subjectId, chapterId, score = null) {
  if (!userStats.subjectsProgress[subjectId]) {
    userStats.subjectsProgress[subjectId] = {};
  }
  
  userStats.subjectsProgress[subjectId][chapterId] = 'completed';
  userStats.completedQuizzes++;
  userStats.quizzesToday++;
  
  // Award XP based on score if available
  let xpGained = 20;
  if (score) {
    xpGained = Math.floor(score / 100 * 50); // Max 50 XP for 100% score
  } else {
    xpGained = 20 + Math.floor(Math.random() * 10);
  }
  
  addXP(xpGained);
  
  // Update daily challenge progress
  if (userStats.currentChallenge && !userStats.currentChallenge.completed) {
    userStats.currentChallenge.progress++;
    if (userStats.currentChallenge.progress >= userStats.currentChallenge.target) {
      userStats.currentChallenge.completed = true;
      addXP(userStats.currentChallenge.reward);
      showToast(`üèÜ Daily Challenge Completed! +${userStats.currentChallenge.reward} XP`);
    }
    updateChallengeProgress();
  }
  
  // Update streak
  updateStreak();
  
  // Check achievements
  checkAchievements();
  
  saveUserStats();
  updateUI();
  renderSubjects(); // Refresh the UI
  
  showToast(`‚úÖ Chapter completed! +${xpGained} XP earned!`);
}
  // Add this function
function updateChallengeProgress() {
  if (userStats.currentChallenge) {
    const progress = userStats.currentChallenge.progress;
    const target = userStats.currentChallenge.target;
    document.getElementById('challengeDesc').textContent = 
      `${userStats.currentChallenge.desc} (${progress}/${target})`;
  }
}

// Update startDailyChallenge function
function startDailyChallenge() {
  if (userStats.currentChallenge && !userStats.currentChallenge.completed) {
    showToast('üéØ Daily Challenge Active! Complete quizzes to earn XP!');
    playSound('success');
  } else {
    showToast('üèÜ Challenge already completed! New challenge tomorrow.');
  }
}

// ========== XP & LEVELING ==========
function addXP(amount) {
  userStats.totalXP += amount;
  
  const newLevel = calculateLevel(userStats.totalXP);
  if (newLevel > userStats.level) {
    userStats.level = newLevel;
    showToast(`üéâ Level Up! You're now Level ${newLevel}!`);
    playSound('levelup');
    triggerConfetti();
    checkAchievements();
  }
  
  updateXPBar();
  saveUserStats();
}

function calculateLevel(xp) {
  // Level formula: level = floor(sqrt(xp / 50))
  return Math.floor(Math.sqrt(xp / 50)) + 1;
}

function getXPForNextLevel(level) {
  // XP needed for next level
  return level * level * 50;
}

function updateXPBar() {
  const currentLevel = userStats.level;
  const xpForCurrentLevel = (currentLevel - 1) * (currentLevel - 1) * 50;
  const xpForNextLevel = getXPForNextLevel(currentLevel);
  const xpInCurrentLevel = userStats.totalXP - xpForCurrentLevel;
  const xpNeededForLevel = xpForNextLevel - xpForCurrentLevel;
  const progress = (xpInCurrentLevel / xpNeededForLevel) * 100;
  
  document.getElementById('currentLevel').textContent = currentLevel;
  document.getElementById('currentXP').textContent = xpInCurrentLevel;
  document.getElementById('nextLevelXP').textContent = xpNeededForLevel;
  document.getElementById('xpProgressBar').style.width = `${progress}%`;
}

// ========== STREAK SYSTEM ==========
function updateStreak() {
  const today = new Date().toDateString();
  const lastDate = userStats.lastQuizDate;
  
  if (!lastDate) {
    userStats.streak = 1;
    userStats.lastQuizDate = today;
  } else if (lastDate !== today) {
    const lastDateObj = new Date(lastDate);
    const todayObj = new Date(today);
    const diffTime = Math.abs(todayObj - lastDateObj);
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    if (diffDays === 1) {
      userStats.streak++;
      showToast(`üî• ${userStats.streak} day streak! Keep it up!`);
    } else {
      userStats.streak = 1;
    }
    
    userStats.lastQuizDate = today;
  }
  
  if (userStats.streak > userStats.bestStreak) {
    userStats.bestStreak = userStats.streak;
  }
  
  saveUserStats();
  updateUI();
}

// ========== ACHIEVEMENTS ==========
function checkAchievements() {
  const checks = {
    'first_quiz': userStats.completedQuizzes >= 1,
'streak_7': userStats.streak >= 7,
'streak_30': userStats.streak >= 30,
'level_10': userStats.level >= 10,
'level_25': userStats.level >= 25,
'quiz_marathon': userStats.quizzesToday >= 10
};
Object.entries(checks).forEach(([id, condition]) => {
const achievement = userStats.achievements.find(a => a.id === id);
if (achievement && !achievement.unlocked && condition) {
unlockAchievement(id);
}
});
}
function unlockAchievement(id) {
const achievement = userStats.achievements.find(a => a.id === id);
if (achievement && !achievement.unlocked) {
achievement.unlocked = true;
showToast(`üèÜ Achievement Unlocked: ${achievement.name}!`);
playSound('achievement');
triggerConfetti();
// Bonus XP for achievement
addXP(50);

saveUserStats();
}
}
// ========== FIX DAILY CHALLENGE ==========
function updateDailyChallenge() {
  // Get today's date
  const today = new Date().toDateString();
  
  // Initialize currentChallenge if not exists or if it's a new day
  if (!userStats.currentChallenge || userStats.currentChallenge.date !== today) {
    const challenges = [
      { desc: 'Complete 5 quizzes today', reward: 50, target: 5 },
      { desc: 'Score 80% or above in 3 quizzes', reward: 75, target: 3 },
      { desc: 'Complete quizzes from 3 different subjects', reward: 100, target: 3 }
    ];
    
    // Use date-based randomization for consistent daily challenge
    const dayOfYear = Math.floor((new Date() - new Date(new Date().getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
    const dailyIndex = dayOfYear % challenges.length;
    const dailyChallenge = challenges[dailyIndex];
    
    userStats.currentChallenge = {
      date: today,
      desc: dailyChallenge.desc,
      reward: dailyChallenge.reward,
      target: dailyChallenge.target,
      progress: userStats.quizzesToday || 0,
      completed: false
    };
    
    saveUserStats();
  }
  
  const currentChallenge = userStats.currentChallenge;
  
  // Update UI
  document.getElementById('challengeDesc').textContent = `${currentChallenge.desc} (${currentChallenge.progress}/${currentChallenge.target})`;
  document.getElementById('challengeReward').textContent = `+${currentChallenge.reward} XP`;
  
  // Update timer (only set once)
  if (!window.challengeTimerStarted) {
    window.challengeTimerStarted = true;
    setInterval(() => {
      const now = new Date();
      const tomorrow = new Date(now);
      tomorrow.setDate(tomorrow.getDate() + 1);
      tomorrow.setHours(0, 0, 0, 0);
      const diff = tomorrow - now;
      const hours = Math.floor(diff / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);
      
      document.getElementById('challengeTimer').textContent = 
        `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }, 1000);
  }
}
function startDailyChallenge() {
showToast('üéØ Daily Challenge Started! Good luck!');
playSound('success');
}
// ========== UI UPDATES ==========
function updateUI() {
document.getElementById('totalXP').textContent = userStats.totalXP;
document.getElementById('levelValue').textContent = userStats.level;
document.getElementById('streakValue').textContent = userStats.streak;
document.getElementById('completedQuizzes').textContent = userStats.completedQuizzes;
// Modal stats
document.getElementById('modalTotalQuizzes').textContent = userStats.completedQuizzes;
document.getElementById('modalAccuracy').textContent = `${userStats.accuracy}%`;
document.getElementById('modalTotalTime').textContent = `${Math.floor(userStats.totalTime / 60)}h`;
document.getElementById('modalBestStreak').textContent = userStats.bestStreak;
updateXPBar();
renderAchievements();
}
function renderAchievements() {
const grid = document.getElementById('achievementsGrid');
if (!grid) return;
grid.innerHTML = '';
userStats.achievements.forEach(achievement => {
const div = document.createElement('div');
div.className = `achievement-item ${achievement.unlocked ? 'unlocked' : 'locked'}`;
div.innerHTML = `
  <div class="achievement-icon">${achievement.icon}</div>
  <div class="achievement-name">${achievement.name}</div>
  <div class="achievement-desc">${achievement.desc}</div>
`;

grid.appendChild(div);
});
}
// ========== MODALS ==========
function openAchievementsModal() {
document.getElementById('achievementsModal').classList.add('active');
playSound('click');
}
function closeAchievementsModal() {
document.getElementById('achievementsModal').classList.remove('active');
}
// ========== NOTIFICATIONS ==========
function showToast(message) {
const toast = document.getElementById('toast');
const toastMessage = document.getElementById('toastMessage');
toastMessage.textContent = message;
toast.classList.add('show');
setTimeout(() => {
toast.classList.remove('show');
}, 3000);
}
// ========== CONFETTI ==========
function triggerConfetti() {
const colors = ['#007bff', '#28a745', '#ffc107', '#dc3545', '#17a2b8'];
const confettiCount = 50;
for (let i = 0; i < confettiCount; i++) {
const confetti = document.createElement('div');
confetti.className = 'confetti';
confetti.style.left = Math.random() * 100 + 'vw';
confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
confetti.style.animationDelay = Math.random() * 0.5 + 's';
confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
document.body.appendChild(confetti);

setTimeout(() => confetti.remove(), 3000);
}
}
// ========== SOUND EFFECTS ==========
function playSound(type) {
if (!userStats.soundEnabled) return;
const sounds = {
'click': [200, 0.1],
'success': [400, 0.2],
'levelup': [600, 0.3],
'achievement': [800, 0.3]
};
const [frequency, duration] = sounds[type] || [300, 0.1];
try {
const audioContext = new (window.AudioContext || window.webkitAudioContext)();
const oscillator = audioContext.createOscillator();
const gainNode = audioContext.createGain();
oscillator.connect(gainNode);
gainNode.connect(audioContext.destination);

oscillator.frequency.value = frequency;
oscillator.type = 'sine';

gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);

oscillator.start(audioContext.currentTime);
oscillator.stop(audioContext.currentTime + duration);
} catch (e) {
console.log('Sound not supported');
}
}
function toggleSound() {
userStats.soundEnabled = !userStats.soundEnabled;
const btn = document.getElementById('soundToggle');
btn.textContent = userStats.soundEnabled ? 'üîä' : 'üîá';
btn.classList.toggle('muted');
saveUserStats();
if (userStats.soundEnabled) {
playSound('click');
}
}
// ========== FULLSCREEN ==========
function toggleFullscreen() {
try {
if (!document.fullscreenElement) {
document.documentElement.requestFullscreen().catch(err => {
console.log('Fullscreen error:', err);
});
} else {
document.exitFullscreen();
}
playSound('click');
} catch (err) {
console.log('Fullscreen not supported');
}
}
// ========== LOCAL STORAGE ==========
function loadUserDataFromFirebase(userId) {
  db.collection('users').doc(userId).get()
    .then((doc) => {
      if (doc.exists) {
        const data = doc.data();
        userStats = { ...userStats, ...data };
        
        // Reset daily counter if it's a new day
        const today = new Date().toDateString();
        if (userStats.lastQuizDate !== today) {
          userStats.quizzesToday = 0;
          userStats.dailyChallengeCompleted = false;
        }
        
        checkQuizCompletion(); // Check for quiz completion
        renderSubjects(); // Render subjects
        updateUI(); // Update all UI elements
      } else {
        // First time user - create initial data
        renderSubjects(); // Render for new users too
        updateUI();
        saveUserStats();
      }
    })
    .catch((error) => {
      console.error('Error loading user data:', error);
      showToast('‚ùå Error loading data. Please refresh.');
    });
}
function saveUserStats() {
  if (!currentUser) return;
  
  try {
    db.collection('users').doc(currentUser.uid).set({
      ...userStats,
      lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
    }, { merge: true })
    .then(() => {
      console.log('Stats saved to Firebase');
    })
    .catch((error) => {
      console.error('Firebase save error:', error);
    });
  } catch (e) {
    console.error('Failed to save stats:', e);
  }
}
// ========== KEYBOARD SHORTCUTS ==========
document.addEventListener('keydown', (e) => {
if (e.ctrlKey || e.metaKey) {
if (e.key === 'k') {
e.preventDefault();
document.getElementById('searchInput').focus();
}
}
if (e.key === 'Escape') {
if (document.getElementById('achievementsModal').classList.contains('active')) {
closeAchievementsModal();
} else if (currentSubject) {
backToSubjects();
}
}
});
// ========== RESET DAILY CHALLENGE AT MIDNIGHT ==========
setInterval(() => {
const now = new Date();
if (now.getHours() === 0 && now.getMinutes() === 0) {
userStats.quizzesToday = 0;
userStats.dailyChallengeCompleted = false;
saveUserStats();
updateDailyChallenge();
showToast('üåÖ New day, new challenges! Good morning!');
}
}, 60000); // Check every minute
// ========== AUTO-SAVE ==========
setInterval(saveUserStats, 30000); // Auto-save every 30 seconds
// ========== PREVENT ACCIDENTAL EXIT ==========
window.addEventListener('beforeunload', (e) => {
saveUserStats();
});
</script>
</body>
</html>

      

